(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,a){},15:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),c=a(7),r=a.n(c),o=(a(14),a(1)),u=a(2),l=a(4),s=a(3),m=a(5),d=[0,51,101,151,201,301,401,501],f=[0,12.1,35.5,55.6,150.5,250.5,350.5,500.1],p=[0,35.1,75.1,115.1,150.1,250.1,350.1,500.1];function h(t,e){return t.findIndex(function(t){return e<t})}function v(t,e,a,n){var i=h(t,n);return e[i-1]+(n-t[i-1])*(e[i]-a-e[i-1])/(t[i]-t[i-1])}var E=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(s.a)(e).call(this,t))).state={status:"retrieving data...",color:"white",data:null},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;fetch("https://api.waqi.info/feed/"+this.props.city+"/?token=7ef04af09a2a93a67569a5c774a03c617e99103e").then(function(t){return t.json()}).then(function(e){if("ok"!==e.status)throw new Error;var a,n=e.data,i=(a=n.iaqi.pm25.v,Math.round(10*v(d,f,.1,a))/10),c=function(t){return Math.round(v(p,d,0,t))}(i);t.setState({data:{mug:i,aqi25:n.iaqi.pm25.v,aqicat:h(d,n.iaqi.pm25.v),caqi25:c,caqicat:h(d,c),aqi10:n.iaqi.pm10.v,localTime:new Date(n.time.s),universalTime:new Date(n.time.s+n.time.tz)}})}).catch(function(e){return t.setState({status:"failed to load data"})})}},{key:"render",value:function(){var t=this.state.data;return t?i.a.createElement("div",null,t.localTime.toLocaleTimeString()," local time",i.a.createElement("br",null),"PM2.5 concentration: ",t.mug," \xb5g/m",i.a.createElement("sup",null,"3"),i.a.createElement("br",null),"AQI: ",i.a.createElement("span",{className:"aqi"+t.aqicat},t.aqi25),i.a.createElement("br",null),"(Chinese AQI: ",i.a.createElement("span",{className:"aqi"+t.caqicat},t.caqi25),")"):this.state.status}}]),e}(i.a.Component),q=function(t){function e(){return Object(o.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"CityData"},i.a.createElement("header",null,this.props.city),i.a.createElement("content",null,i.a.createElement(E,{city:this.props.city})))}}]),e}(i.a.Component);var b=function(){return i.a.createElement("div",{id:"content"},i.a.createElement(q,{city:"Vienna"}),i.a.createElement(q,{city:"Kunming"}),i.a.createElement(q,{city:"London"}))};r.a.render(i.a.createElement(b,null),document.getElementById("root"))},8:function(t,e,a){t.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.639dd469.chunk.js.map